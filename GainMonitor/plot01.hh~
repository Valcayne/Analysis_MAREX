
#include "GainMonitoring01.hh"

/*

plot01 -> pinta los cambios de ganancia en funciÃ³n del run

*/


void plot01(const char* DetName,int DetID1,int DetID2,int DetID3,int DetID4,const char* savefname=0){

  SetStyle01();
  //=============================================================
  char dirname[100]="out01";
  //=============================================================

  TGraph* gr1=GetGainMonitoring(DetName,DetID1,dirname);
  TGraph* gr2=0; if(DetID2>=0){gr2=GetGainMonitoring(DetName,DetID2,dirname);}
  TGraph* gr3=0; if(DetID3>=0){gr3=GetGainMonitoring(DetName,DetID3,dirname);}
  TGraph* gr4=0; if(DetID4>=0){gr4=GetGainMonitoring(DetName,DetID4,dirname);}

  gr1->GetXaxis()->SetNdivisions(507);
  gr1->GetYaxis()->SetTitleOffset(1.5);
  gr1->GetXaxis()->SetNoExponent();

  gr1->SetLineColor(1); gr1->SetMarkerColor(1);
  if(gr2){gr2->SetLineColor(2); gr2->SetMarkerColor(2);}
  if(gr3){gr3->SetLineColor(4); gr3->SetMarkerColor(4);}
  if(gr4){gr4->SetLineColor(8); gr4->SetMarkerColor(8);}

  //----------------------------------------------------
  double Ymin=1.e20,Ymax=-1.e20;
  UpdateMinimumAndMaximum(gr1,-1.e20,1.e20,Ymin,Ymax);
  if(gr2){UpdateMinimumAndMaximum(gr2,-1.e20,1.e20,Ymin,Ymax);} 
  if(gr3){UpdateMinimumAndMaximum(gr3,-1.e20,1.e20,Ymin,Ymax);} 
  if(gr4){UpdateMinimumAndMaximum(gr4,-1.e20,1.e20,Ymin,Ymax);} 
  gr1->GetYaxis()->SetRangeUser(Ymin-0.01,Ymax+0.01);
  //----------------------------------------------------
  char title[200];
  sprintf(title,"%s - black:%d,red:%d,blue:%d,green:%d",DetName,DetID1,DetID2,DetID3,DetID4);
  gr1->SetTitle(title);
  
  TCanvas* c1=new TCanvas("c1","c1",800,600);
  gr1->Draw("ALP");
  gr2->Draw("LP same");
  gr3->Draw("LP same");
  gr4->Draw("LP same");
  if(savefname){
    c1->SaveAs(savefname);
  }
}
